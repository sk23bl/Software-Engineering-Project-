import json
import csv

# Replace 'your_file.json' with the path to your JSON file
json_file_path = 'TEST.json'

# Read JSON file
with open(json_file_path, 'r', encoding='utf-8') as json_file:
    json_data = json.load(json_file)

# Extracting author and prompts from the JSON data
data_rows = []
for source in json_data.get("Sources", []):
    for sharing in source.get("ChatgptSharing", []):
        for conversation in sharing.get("Conversations", []):
            author = source.get("Author", "")
            prompt = conversation.get("Prompt", "")
            data_rows.append((author, prompt))

# Writing author and prompts to CSV file
csv_file_path = "author_and_prompts.csv"
with open(csv_file_path, mode="w", newline="", encoding="utf-8") as csv_file:
    writer = csv.writer(csv_file)
    writer.writerow(["Author", "Prompt"])  # Write header
    for row in data_rows:
        writer.writerow(row)

print(f"Author and prompts written to {csv_file_path}")
